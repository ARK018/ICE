---
import { ChevronLeft, ChevronRight } from "lucide-react";

const slides = [
  {
    image: "/src/assets/global.jpg",
    title: "Global Quality Food Exporter From India",
    description:
      "We export food including raw vegetables, fruits, spices & many more",
  },
  {
    image: "/src/assets/Img2.jpg",
    title: "Fresh Produce Straight from the Farm",
    description: "High-quality fruits and vegetables for global markets",
  },
  {
    image: "/src/assets/Img3.jpg",
    title: "Spices that Elevate Every Dish",
    description: "Authentic Indian spices exported worldwide",
  },
];
---

<div class="relative w-full h-[550px] bg-slate-200 mb-40 overflow-hidden">
  {
    slides.map((slide, index) => (
      <div
        class="absolute top-0 left-0 w-full h-full cursor-default transition-opacity duration-1000 opacity-0"
        data-index={index}
      >
        <img
          src={slide.image}
          alt={slide.title}
          class="absolute top-0 left-0 w-full h-full object-cover"
        />
        <div class="absolute inset-0 bg-black bg-opacity-55" />
        <div class="absolute inset-0 flex flex-col items-center justify-center text-center text-white p-4">
          <h1 class="text-5xl font-bold mb-4">{slide.title}</h1>
          <p class="text-lg max-w-2xl">{slide.description}</p>
        </div>
      </div>
    ))
  }
  <button
    id="prevSlide"
    class="absolute left-10 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10"
    aria-label="Previous slide"
  >
    <ChevronLeft className="w-6 h-6 text-gray-800" />
  </button>
  <button
    id="nextSlide"
    class="absolute right-10 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-all z-10"
    aria-label="Next slide"
  >
    <ChevronRight className="w-6 h-6 text-gray-800" />
  </button>
</div>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll("[data-index]");
  const totalSlides = slides.length;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      const slideElement = slide as HTMLElement; // Casting to HTMLElement
      if (i === index) {
        slideElement.classList.remove("opacity-0");
        slideElement.classList.add("opacity-100");
        slideElement.style.zIndex = "1";
      } else {
        slideElement.classList.remove("opacity-100");
        slideElement.classList.add("opacity-0");
        setTimeout(() => {
          slideElement.style.zIndex = "0";
        }, 1000); // Match this to the duration of the transition
      }
    });
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  function prevSlide() {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    showSlide(currentSlide);
  }

  // Initial slide
  showSlide(currentSlide);

  // Auto-advance slides every 3 seconds (adjusted for smooth transition)
  setInterval(nextSlide, 3000);

  // Event listeners for manual navigation
  document.getElementById("nextSlide")?.addEventListener("click", nextSlide);
  document.getElementById("prevSlide")?.addEventListener("click", prevSlide);
</script>
