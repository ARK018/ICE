---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Welcome to Astro.">
  <!-- Sign In section -->
  <div class="flex justify-center items-center">
    <div
      class="relative grid grid-cols-2 items-center justify-center w-full h-[calc(100vh-72px)]"
    >
      <!-- Image Section -->
      <div class="relative justify-center items-center aspect-[2/1] w-full">
        <img
          src="src/assets/Contact.jpg"
          alt="Woman working on laptop"
          class="w-full h-full absolute object-cover"
        />
      </div>
      <!-- Form Section -->
      <div class="h-full flex flex-col justify-center items-center">
        <form id="contactForm" class="space-y-6 w-[400px]">
          <!-- Name Input -->
          <div class="w-full">
            <label
              for="name"
              class="block text-sm font-medium text-gray-700 mb-1"
            >
              Name
            </label>
            <input
              type="text"
              id="name"
              name="from_name"
              class="w-full py-2 border-b border-gray-300 focus:outline-none"
              placeholder="Your Name"
              required
            />
          </div>
          <!-- Email Input -->
          <div class="w-full">
            <label
              for="email"
              class="block text-sm font-medium text-gray-700 mb-1"
            >
              Email
            </label>
            <input
              type="email"
              id="email"
              name="from_email"
              class="w-full py-2 border-b border-gray-300 focus:outline-none"
              placeholder="you@example.com"
              required
            />
          </div>
          <!-- Message TextArea -->
          <div class="w-full">
            <label
              for="message"
              class="block text-sm font-medium text-gray-700 mb-1"
            >
              Message
            </label>
            <textarea
              id="message"
              name="message"
              rows="4"
              class="w-full py-2 border-b border-gray-300 focus:outline-none"
              placeholder="Write your message..."
              required></textarea>
          </div>
          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full px-7 py-2 rounded-full border-2 border-[#131820] text-black cursor-pointer hover:bg-gray-800 hover:text-white transition duration-300"
          >
            Submit
          </button>
        </form>
      </div>
    </div>
  </div>
</Layout>

<script>
  import emailjs from "@emailjs/browser";
  emailjs.init({
    publicKey: "UiWw3BRBD81GkAxfi",
  });
  const form = document.getElementById("contactForm") as HTMLFormElement;
  form.addEventListener("submit", async (e: Event) => {
    e.preventDefault();
    try {
      const result = await emailjs.sendForm(
        "service_7j1mhvl",
        "template_7r1bc0n",
        form
      );
      console.log("Email sent successfully:", result.text);
      // Redirect to the success page
      window.location.href = "/success";
    } catch (error) {
      console.error("Error sending email:", error);
      alert("There was an error submitting the form. Please try again.");
    }
  });
</script>
